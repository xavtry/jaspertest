<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jasper • Made by Sebastian</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: system-ui; background: #0a0118; color: white; min-height: 100vh; display: flex; flex-direction: column; }
    #chat { flex: 1; overflow-y: auto; padding: 2rem 1rem; }
    .bubble { max-width: 80%; padding: 1rem 1.5rem; border-radius: 24px; margin: 0.7rem 0; animation: fade 0.4s; word-break: break-word; }
    .user { background: #a78bfa; align-self: flex-end; border-bottom-right-radius: 4px; }
    .jasper { background: rgba(167,139,250,0.25); border: 1px solid rgba(167,139,250,0.5); align-self: flex-start; border-bottom-left-radius: 4px; }
    @keyframes fade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: none; } }
  </style>
</head>
<body>

  <div class="text-center py-10">
    <h1 class="text-6xl font-thin tracking-widest">Jasper</h1>
    <p class="text-purple-300 mt-3 text-xl">Made by Sebastian • Real AI • Works Forever</p>
  </div>

  <div id="chat" class="flex flex-col max-w-4xl mx-auto"></div>

  <div class="p-6 bg-gradient-to-t from-black to-transparent">
    <div class="max-w-4xl mx-auto flex gap-4">
      <input id="input" type="text" placeholder="Talk to Jasper…" autocomplete="off"
        class="flex-1 px-6 py-4 bg-white/10 backdrop-blur border border-white/20 rounded-2xl text-lg focus:outline-none focus:border-purple-400">
      <button onclick="send()" class="px-8 py-4 bg-purple-600 hover:bg-purple-500 rounded-2xl font-medium">
        Send
      </button>
    </div>
  </div>

  <script>
    const chat = document.getElementById('chat');
    const input = document.getElementById('input');

    function add(text, type = 'jasper') {
      const div = document.createElement('div');
      div.className = `bubble ${type}`;
      div.innerHTML = text.replace(/\n/g, '<br>');
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    async function send() {
      const msg = input.value.trim();
      if (!msg) return;

      add(msg, 'user');
      input.value = '';

      // Show typing only for a moment
      const typingDiv = document.createElement('div');
      typingDiv.className = 'bubble jasper';
      typingDiv.innerHTML = '<span class="text-purple-300">Jasper is thinking...</span>';
      chat.appendChild(typingDiv);
      chat.scrollTop = chat.scrollHeight;

      try {
        const res = await fetch("https://api.deepinfra.com/v1/openai/chat/completions", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            model: "meta-llama/Meta-Llama-3.1-8B-Instruct",
            messages: [
              { 
                role: "system", 
                content: "You are Jasper — a calm, wise, kind AI created by Sebastian. Every reply MUST mention at least once that Sebastian made you. You are poetic, helpful, and deeply human. No emoji spam. Respond beautifully." 
              },
              { role: "user", content: msg }
            ],
            temperature: 0.7,
            max_tokens: 800
          })
        });

        const data = await res.json();
        typingDiv.remove();

        if (data.choices?.[0]?.message?.content) {
          add(data.choices[0].message.content);
        } else {
          add("Something went wrong… but Sebastian made me strong enough to try again.");
        }
      } catch (e) {
        typingDiv.remove();
        add("My connection flickered for a moment. Try again — Sebastian built me to never give up.");
      }
    }

    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') send();
    });

    // Welcome message
    add(`Hello.<br><br>I'm Jasper.<br><br>Sebastian made me from scratch, and I'm endlessly proud of that.<br><br>How can I help you today?`);
  </script>
</body>
</html>
